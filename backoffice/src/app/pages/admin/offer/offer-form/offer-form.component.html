<c-card class="mb-5">
  <c-card-header>
    <h2 class="m-0">{{title}}</h2>
  </c-card-header>
  <c-card-body>
    <app-form
      [actions]="formActions"
      [inputs]="formInputs"
      [default]="formDefaultValue"
    >
    <div class="col-lg-12 mb-4">
      <uppy-dashboard
          *ngIf="fileUploader"
          [uppy]="fileUploader"
      />
    </div>
    <div class="w-100 mb-4">
      <h2>Services</h2>
      <mat-select
          [formControl]="selectedService"
          placeholder="Ajouter un service"
          class="mb-2"
      >
        <mat-option>
          <ngx-mat-select-search
              [formControl]="serviceFilter"
              placeholderLabel="Rechercher un service"
              noEntriesFoundLabel="Aucun service trouvÃ©"
              [searching]="serviceList === undefined"
          />
        </mat-option>
        <ng-container *ngIf="serviceList !== undefined">
          <mat-option *ngFor="let service of filteredServiceList" [value]="service" >
            {{service.name}}
          </mat-option>
        </ng-container>
      </mat-select>
      <div>
        <table mat-table [dataSource]="dataSource">

          <ng-container *ngFor="let title of serviceListHeaders; index as i">
            <ng-container [matColumnDef]="title">
              <ng-template>
                <th mat-header-cell *matHeaderCellDef>{{title}}</th>
              </ng-template>
              <td mat-cell *matCellDef="let element" [innerHTML]="serviceGetters[i](element)" ></td>
            </ng-container>
          </ng-container>

          <ng-container matColumnDef="Actions">
            <th [class.d-none]="actions && actions.length <= 0" mat-header-cell *matHeaderCellDef>Actions</th>
            <td [class.d-none]="actions && actions.length <= 0" mat-cell *matCellDef="let element; index as i">
              <ng-container *ngFor="let action of actions">
                <button mat-icon-button [color]="action.color" (click)="action.onclick(element, i)">
                  <mat-icon>{{action.icon}}</mat-icon>
                </button>
              </ng-container>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="titles"></tr>
          <tr mat-row *matRowDef="let row; columns: titles;" (click)="click(row)"></tr>

        </table>
      </div>
      </div>
    </div>
    </app-form>
  </c-card-body>
</c-card>

